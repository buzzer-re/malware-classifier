import matplotlib.pyplot as plt
import json
import sys
import argparse


def generate_import_chat(imports):
    sorted_data = sorted(imports.items(), key=lambda x: x[1], reverse=True)[:5]
    sorted_data = dict(sorted_data)
    plt.figure(figsize=(10,5))
    plt.bar(sorted_data.keys(), sorted_data.values())
    plt.show()
        


if __name__ == '__main__':
    if len(sys.argv) != 2:
        print(f"Usage: {sys.argv[0]} <JSON>")
        sys.exit(1)
    
    contents = None
    json_path = sys.argv[1]
    with open(json_path) as json_fd:
        contents = json.loads(json_fd.read())
    
    
    imports = contents.get('imports', None)
    if imports:
        generate_import_chat(imports)